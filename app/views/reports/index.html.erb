<div class="overflow-x-auto">
  <!-- Collapsible Summary Click Counts Table -->
  <div x-data="{ open: true }">
    <button @click="open = !open" class="bg-gray-200 p-2 w-full text-left">
      <h2 class="text-2xl font-bold text-gray-600">Summary Click Counts</h2>
    </button>
    <div x-show="open" class="overflow-hidden transition-all duration-300">
      <table class="min-w-full bg-white border-collapse border border-gray-200">
        <thead>
          <%
=begin%>
 <tr>
            <th colspan="4" class="py-4 px-4 border-b border-gray-200 bg-gray-100 text-center text-2xl font-bold text-gray-600">Summary Click Counts</th>
          </tr> 
<%
=end%>
          <tr>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Short URL</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Original URL</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Title Tag</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Total Clicks</th>
          </tr>
        </thead>
        <tbody>
          <% if @urls.present? %>
            <% @urls.each do |url| %>
              <tr class="border-t border-gray-200">
                <td class="py-2 px-4"><%= link_to url.short_url, shortened_url(url.short_url), class: "text-blue-500 underline" %></td>
                <td class="py-2 px-4"><%= url.target_url %></td>
                <td class="py-2 px-4"><%= url.title %></td>
                <td class="py-2 px-4 text-center"><%= url.clicks %></td>
              </tr>
            <% end %>
          <% else %>
            <tr>
              <td colspan="4" class="py-2 px-4 text-center text-gray-600">No summary records available.</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Collapsible Detailed Click Records Table -->
  <div x-data="{ open: false }" class="mt-4">
    <button @click="open = !open" class="bg-gray-200 p-2 w-full text-left">
      <h2 class="text-2xl font-bold text-gray-600">Detailed Click Records</h2>
    </button>
    <div x-show="open" class="overflow-hidden transition-all duration-300">
      <table class="min-w-full bg-white border-collapse border border-gray-200 mb-8">
        <thead>
          <%
=begin%>
 <tr>
            <th colspan="7" class="py-4 px-4 border-b border-gray-200 bg-gray-100 text-center text-2xl font-bold text-gray-600">Detailed Click Records</th>
          </tr> 
<%
=end%>
          <tr>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Short URL</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Original URL</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">City</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Region</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Country</th>
            <th class="py-2 px-4 border-b border-gray-200 bg-gray-100 text-left text-sm uppercase font-bold text-gray-600">Timestamp</th>
          </tr>
        </thead>
        <tbody>
          <% if @clicks.present? %>
            <% @clicks.each do |click| %>
              <tr class="border-t border-gray-200">
                <td class="py-2 px-4"><%= link_to click.url.short_url, shortened_url(click.url.short_url), class: "text-blue-500 underline" %></td>
                <td class="py-2 px-4"><%= click.url.target_url %></td>
                <td class="py-2 px-4 text-center"><%= click.city %></td>
                <td class="py-2 px-4 text-center"><%= click.region %></td>
                <td class="py-2 px-4 text-center"><%= click.country %></td>
                <td class="py-2 px-4 text-center"><%= click.clicked_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
              </tr>
            <% end %>
          <% else %>
            <tr>
              <td colspan="7" class="py-2 px-4 text-center text-gray-600">No click records available.</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Add this script at the end of the page or in a separate JS file -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2" defer></script>
